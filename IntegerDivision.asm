@R2
M=0
@R3
M=0
@R4
M=0

@R1
D=M
@ERROR
D;JEQ

@R0
D=M
@R5
M=D
@R1
D=M
@R6
M=D

@R5
D=M
@NEGATIVE_NUMERATOR
D;JLT
@NEGATIVE_DENOMINATOR
@R6
D=M
D;JLT
@MAIN_LOOP
0;JMP

(NEGATIVE_NUMERATOR)
@R5
M=-M
@R6
D=M
@NEGATIVE_DENOMINATOR
D;JLT
@MAIN_LOOP
0;JMP

(NEGATIVE_DENOMINATOR)
@R6
M=-M
@MAIN_LOOP
0;JMP

(MAIN_LOOP)
    @R5
    D=M
    @R6
    D=D-M
    @END_DIVISION
    D;JLT

    @R2
    M=M+1

    @R5
    M=D

    @MAIN_LOOP
    0;JMP

(END_DIVISION)
    @R5
    D=M
    @R3
    M=D

@R0
D=M
@RESTORE_REMAINDER_SIGN
D;JLT
@R1
D=M
@RESTORE_QUOTIENT_SIGN
D;JLT
@END
0;JMP

(RESTORE_REMAINDER_SIGN)
    @R3
    M=-M
    @R1
    D=M
    @RESTORE_QUOTIENT_SIGN
    D;JLT
    @END
    0;JMP

(RESTORE_QUOTIENT_SIGN)
    @R0
    D=M
    @R1
    D=D*M
    @R2
    M=D
    @END
    0;JMP

(ERROR)
    @R4
    M=1
    @END
    0;JMP

(END)
    @END
    0;JMP
